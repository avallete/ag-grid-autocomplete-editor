!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ag-grid-community/core"));else if("function"==typeof define&&define.amd)define(["@ag-grid-community/core"],t);else{var n="object"==typeof exports?t(require("@ag-grid-community/core")):t(e["@ag-grid-community/core"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(self,(function(e){return(()=>{"use strict";var t={220:(e,t,n)=>{n.r(t),n.d(t,{AutocompleteSelectCellEditor:()=>c});var r=n(801);var o,i=(o=function(e,t){return(o=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}o(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),u=function(){return(u=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},c=function(e){function t(){var t=e.call(this,'<div class="ag-wrapper ag-input-wrapper ag-text-field-input-wrapper ag-cell-editor-autocomplete-wrapper" style="padding: 0 !important;"><input class="ag-input-field-input ag-text-field-input ag-cell-editor-autocomplete-input" type="text"/></div>')||this;return t.focusAfterAttached=!1,t.required=!1,t.eInput=t.getGui().querySelector("input"),t.currentItem&&(t.eInput.value=t.currentItem.label||t.currentItem.value),t}return i(t,e),t.suppressKeyboardEvent=function(e){var t=e.event.keyCode;return e.editing&&(38===t||40===t||13===t||9===t)},t.getStartValue=function(e){return 8===e.keyPress||46===e.keyPress?"":e.charPress?e.charPress:e.formatValue(e.value)},t.prototype.init=function(e){var n=this;this.stopEditing=e.stopEditing;var r={showOnFocus:!1,render:function(e,t,n){var r=document.createElement("div"),o=(null!=n?n:"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(o,"gi"),u=document.createElement("span");return u.innerHTML=t.label.replace(i,(function(e){return"<strong>"+e+"</strong>"})),r.appendChild(u),e.addManagedListener(r,"mousedown",(function(n){e.currentItem=t,n.stopPropagation()})),r},renderGroup:function(e,t){var n=document.createElement("div");return n.textContent=t,n.className="group",n},className:"ag-cell-editor-autocomplete",minLength:1,emptyMsg:"None",strict:!0,autoselectfirst:!0,onFreeTextSelect:function(){},onSelect:function(e,t){e.currentItem=t},fetch:function(t,r,o){var i=n.getSelectData(e),u=r.toLowerCase()||t.eInput.value.toLowerCase();o(i.filter((function(e){return-1!==e.label.toLowerCase().indexOf(u)})))},debounceWaitMs:200,customize:function(e,t,n,r,o){o<100&&(r.style.top="10px",r.style.bottom=window.innerHeight-n.bottom+t.offsetHeight+"px",r.style.maxHeight="140px")}};this.focusAfterAttached=e.cellStartedEdit,this.eInput.placeholder=e.placeholder||"",this.eInput.value=t.getStartValue(e);var o=u(u({},r),e.autocomplete);this.autocompleter=function(e){var t,n,r=e.input.ownerDocument||window.document,o=r.createElement("div"),i=o.style,u=navigator.userAgent,c=-1!==u.indexOf("Firefox")&&-1!==u.indexOf("Mobile"),a=e.debounceWaitMs||0,s=e.strict,l=e.autoselectfirst,p=e.onFreeTextSelect,f=c?"input":"keyup",d=[],v="",h=void 0!==e.minLength?e.minLength:2,m=e.showOnFocus,g=0;if(!e.input)throw new Error("input undefined");var y=e.input;function b(){n&&window.clearTimeout(n)}function E(){return!!o.parentNode}function x(){var e;g++,d=[],v="",t=void 0,(e=o.parentNode)&&e.removeChild(o)}function w(){for(;o.firstChild;)o.removeChild(o.firstChild);var n=function(e,t){var n=r.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var u=function(e,t){var n=r.createElement("div");return n.textContent=e,n};e.renderGroup&&(u=e.renderGroup);var c=r.createDocumentFragment(),a="#9?$";if(d.forEach((function(r){if(r.group&&r.group!==a){a=r.group;var o=u(r.group,v);o&&(o.className+=" group",c.appendChild(o))}var i=n(r,v);i&&(i.addEventListener("click",(function(t){e.onSelect(r,y,t),x(),t.preventDefault(),t.stopPropagation()})),r===t&&(i.className+=" selected"),c.appendChild(i))})),o.appendChild(c),d.length<1&&s){if(!e.emptyMsg)return void x();var l=r.createElement("div");l.className="empty",l.textContent=e.emptyMsg,o.appendChild(l),t=void 0}r=e.input.ownerDocument||window.document,o.parentNode||r.body.appendChild(o),function(){if(E()){i.height="auto",i.width=y.offsetWidth+"px";var t=y.getBoundingClientRect(),n=t.top+y.offsetHeight,u=r.defaultView.innerHeight-n;u<0&&(u=0),i.top=n+"px",i.bottom="",i.left=t.left+"px",i.maxHeight=u+"px",e.customize&&e.customize(y,t,o,u)}}(),function(){var e=o.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<o.scrollTop)o.scrollTop=t.offsetTop;else{var r=t.offsetTop+t.offsetHeight,i=o.scrollTop+o.offsetHeight;r>i&&(o.scrollTop+=r-i)}}}()}function S(){E()&&w()}function C(){S()}function O(e){e.target!==o?S():e.preventDefault()}function L(e){for(var t=e.which||e.keyCode||0,n=0,r=[38,13,27,39,37,16,17,18,20,91,9];n<r.length;n++)if(t===r[n])return;40===t&&E()||N(0)}function T(n){var r=n.which||n.keyCode||0;if(38===r||40===r||27===r){var o=E();if(27===r)e.onSelect(void 0,y,n),x();else{if(!E||d.length<1)return;38===r?function(){if(d.length<1)t=void 0;else if(t===d[0]||void 0===t)t=d[d.length-1];else for(var e=d.length-1;e>0;e--)if(t===d[e]||1===e){t=d[e-1];break}}():function(){if(d.length<1&&(t=void 0),t&&t!==d[d.length-1]){for(var e=0;e<d.length-1;e++)if(t===d[e]){t=d[e+1];break}}else t=d[0]}(),w()}return n.preventDefault(),void(o&&n.stopPropagation())}if((13===r||9===r)&&(s&&(e.onSelect(t,y,n),x()),!s)){var i={label:y.value};t?e.onSelect(t,y,n):(p&&p(i,y),e.onSelect(i,y,n)),x()}}function I(){m&&N(1)}function N(r){var o=++g,i=y.value;i.length>=h||1===r?(b(),n=window.setTimeout((function(){e.fetch(i,(function(e){g===o&&e&&(v=i,t=(d=e).length>0&&l?d[0]:void 0,w())}),0)}),0===r?a:0)):x()}function P(){setTimeout((function(){r.activeElement!==y&&x()}),200)}return o.className="autocomplete "+(e.className||""),i.position="fixed",y.addEventListener("keydown",T),y.addEventListener(f,L),y.addEventListener("blur",P),y.addEventListener("focus",I),r.addEventListener("resize",C),r.addEventListener("scroll",O,!0),{destroy:function(){y.removeEventListener("focus",I),y.removeEventListener("keydown",T),y.removeEventListener(f,L),y.removeEventListener("blur",P),r.removeEventListener("resize",C),r.removeEventListener("scroll",O,!0),b(),x(),g++}}}({input:this.eInput,render:function(e,t){return o.render?o.render(n,e,t):r.render(n,e,t)},renderGroup:function(e,t){return o.renderGroup?o.renderGroup(n,e,t):r.renderGroup(n,e,t)},className:o.className||r.className,minLength:void 0!==o.minLength?o.minLength:r.minLength,emptyMsg:o.emptyMsg||r.emptyMsg,strict:o.strict,autoselectfirst:o.autoselectfirst,showOnFocus:o.showOnFocus,onFreeTextSelect:function(e,t){return o.onFreeTextSelect?o.onFreeTextSelect(n,e,t):r.onFreeTextSelect(n,e,t)},onSelect:function(e,t,i){var u;return o.onSelect?(u=o.onSelect(n,e,t),i instanceof KeyboardEvent?n.handleTabEvent(i):n.destroy(),u):(u=r.onSelect(n,e,t),i instanceof KeyboardEvent?n.handleTabEvent(i):n.destroy(),u)},fetch:function(e,t,i){return o.fetch?o.fetch(n,e,t,i):r.fetch(n,e,t,i)},debounceWaitMs:o.debounceWaitMs||r.debounceWaitMs,customize:function(e,t,i,u){return o.customize?o.customize(n,e,t,i,u):r.customize(n,e,t,i,u)}}),e.required&&(this.required=!0),e.colDef.suppressKeyboardEvent||(e.colDef.suppressKeyboardEvent=t.suppressKeyboardEvent)},t.prototype.handleTabEvent=function(e){9===(e.which||e.keyCode||0)&&this.gridOptionsWrapper?e.shiftKey?this.gridOptionsWrapper.getApi().tabToPreviousCell():this.gridOptionsWrapper.getApi().tabToNextCell():this.destroy()},t.prototype.afterGuiAttached=function(e){if(this.focusAfterAttached){var t=this.eInput;t.focus(),t.select();var n=t.value?t.value.length:0;n>0&&t.setSelectionRange(n,n)}},t.prototype.focusIn=function(){this.eInput.focus(),this.eInput.select()},t.prototype.focusOut=function(){this.eInput.blur(),this.autocompleter.destroy()},t.prototype.destroy=function(){this.focusOut(),this.stopEditing&&this.stopEditing()},t.prototype.getValue=function(){return this.currentItem},t.prototype.isCancelAfterEnd=function(){return!!this.required&&!this.currentItem},t.prototype.isCancelBeforeStart=function(){return!1},t.prototype.isPopup=function(){return!1},t.prototype.getSelectData=function(e){return"function"==typeof e.selectData?e.selectData(e):Array.isArray(e.selectData)?e.selectData:[]},t}(r.PopupComponent)},801:t=>{t.exports=e}},n={};function r(e){if(n[e])return n[e].exports;var o=n[e]={exports:{}};return t[e](o,o.exports,r),o.exports}return r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r(220)})()}));
//# sourceMappingURL=ag-grid-autocomplete-editor.js.map