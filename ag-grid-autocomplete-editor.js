!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("@ag-grid-community/core"));else if("function"==typeof define&&define.amd)define(["@ag-grid-community/core"],t);else{var n="object"==typeof exports?t(require("@ag-grid-community/core")):t(e["@ag-grid-community/core"]);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="http://localhost:8080/",n(n.s=2)}([function(t,n){t.exports=e},function(e,t,n){},function(e,t,n){"use strict";n.r(t),n.d(t,"AutocompleteSelectCellEditor",(function(){return s}));var r=n(0);n(1);function o(e){var t,n,r=e.input.ownerDocument||window.document,o=r.createElement("div"),i=o.style,u=navigator.userAgent,c=-1!==u.indexOf("Firefox")&&-1!==u.indexOf("Mobile"),a=e.debounceWaitMs||0,s=e.strict,l=e.autoselectfirst,p=e.onFreeTextSelect,f=c?"input":"keyup",d=[],v="",h=void 0!==e.minLength?e.minLength:2,g=e.showOnFocus,m=0;if(!e.input)throw new Error("input undefined");var y=e.input;function b(){n&&window.clearTimeout(n)}function E(){return!!o.parentNode}function w(){var e;m++,d=[],v="",t=void 0,(e=o.parentNode)&&e.removeChild(o)}function x(){for(;o.firstChild;)o.removeChild(o.firstChild);var n=function(e,t){var n=r.createElement("div");return n.textContent=e.label||"",n};e.render&&(n=e.render);var u=function(e,t){var n=r.createElement("div");return n.textContent=e,n};e.renderGroup&&(u=e.renderGroup);var c=r.createDocumentFragment(),a="#9?$";if(d.forEach((function(r){if(r.group&&r.group!==a){a=r.group;var o=u(r.group,v);o&&(o.className+=" group",c.appendChild(o))}var i=n(r,v);i&&(i.addEventListener("click",(function(t){e.onSelect(r,y,t),w(),t.preventDefault(),t.stopPropagation()})),r===t&&(i.className+=" selected"),c.appendChild(i))})),o.appendChild(c),d.length<1&&s){if(!e.emptyMsg)return void w();var l=r.createElement("div");l.className="empty",l.textContent=e.emptyMsg,o.appendChild(l),t=void 0}r=e.input.ownerDocument||window.document,o.parentNode||r.body.appendChild(o),function(){if(E()){i.height="auto",i.width=y.offsetWidth+"px";var t=y.getBoundingClientRect(),n=t.top+y.offsetHeight,u=r.defaultView.innerHeight-n;u<0&&(u=0),i.top=n+"px",i.bottom="",i.left=t.left+"px",i.maxHeight=u+"px",e.customize&&e.customize(y,t,o,u)}}(),function(){var e=o.getElementsByClassName("selected");if(e.length>0){var t=e[0],n=t.previousElementSibling;if(n&&-1!==n.className.indexOf("group")&&!n.previousElementSibling&&(t=n),t.offsetTop<o.scrollTop)o.scrollTop=t.offsetTop;else{var r=t.offsetTop+t.offsetHeight,i=o.scrollTop+o.offsetHeight;r>i&&(o.scrollTop+=r-i)}}}()}function C(){E()&&x()}function O(){C()}function S(e){e.target!==o?C():e.preventDefault()}function T(e){for(var t=e.which||e.keyCode||0,n=0,r=[38,13,27,39,37,16,17,18,20,91,9];n<r.length;n++){if(t===r[n])return}40===t&&E()||_(0)}function L(n){var r=n.which||n.keyCode||0;if(38===r||40===r){var o=E();if(!E||d.length<1)return;return 38===r?function(){if(d.length<1)t=void 0;else if(t===d[0]||void 0===t)t=d[d.length-1];else for(var e=d.length-1;e>0;e--)if(t===d[e]||1===e){t=d[e-1];break}}():function(){if(d.length<1&&(t=void 0),t&&t!==d[d.length-1]){for(var e=0;e<d.length-1;e++)if(t===d[e]){t=d[e+1];break}}else t=d[0]}(),x(),n.preventDefault(),void(o&&n.stopPropagation())}if((13===r||9===r)&&(s&&(e.onSelect(t,y,n),w()),!s)){var i={label:y.value};t?e.onSelect(t,y,n):(p&&p(i,y),e.onSelect(i,y,n)),w()}27===r&&(e.onSelect(void 0,y,n),w())}function P(){g&&_(1)}function _(r){var o=++m,i=y.value;i.length>=h||1===r?(b(),n=window.setTimeout((function(){e.fetch(i,(function(e){m===o&&e&&(v=i,t=(d=e).length>0&&l?d[0]:void 0,x())}),0)}),0===r?a:0)):w()}function A(){setTimeout((function(){r.activeElement!==y&&w()}),200)}return o.className="autocomplete "+(e.className||""),i.position="fixed",y.addEventListener("keydown",L),y.addEventListener(f,T),y.addEventListener("blur",A),y.addEventListener("focus",P),r.addEventListener("resize",O),r.addEventListener("scroll",S,!0),{destroy:function(){y.removeEventListener("focus",P),y.removeEventListener("keydown",L),y.removeEventListener(f,T),y.removeEventListener("blur",A),r.removeEventListener("resize",O),r.removeEventListener("scroll",S,!0),b(),w(),m++}}}var i,u=(i=function(e,t){return(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)},function(e,t){function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),c=function(){return(c=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},a=function(e,t,n,r){var o,i=arguments.length,u=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)u=Reflect.decorate(e,t,n,r);else for(var c=e.length-1;c>=0;c--)(o=e[c])&&(u=(i<3?o(u):i>3?o(t,n,u):o(t,n))||u);return i>3&&u&&Object.defineProperty(t,n,u),u},s=function(e){function t(){var t,n=e.call(this,'<div class="ag-wrapper ag-input-wrapper ag-text-field-input-wrapper ag-cell-editor-autocomplete-wrapper" style="padding: 0 !important;"><input class="ag-input-field-input ag-text-field-input ag-cell-editor-autocomplete-input" type="text"/></div>')||this;return n.focusAfterAttached=!1,n.required=!1,n.strict=!0,n.eInput=n.getGui().querySelector("input"),n.eInput.value=(null===(t=n.getValue())||void 0===t?void 0:t.label)||"",n}return u(t,e),t.suppressKeyboardEvent=function(e){var t=e.event.keyCode;return e.editing&&(t===r.Constants.KEY_UP||t===r.Constants.KEY_DOWN||t===r.Constants.KEY_ENTER||t===r.Constants.KEY_TAB)},t.getStartValue=function(e){return e.keyPress===r.Constants.KEY_BACKSPACE||e.keyPress===r.Constants.KEY_DELETE?"":e.charPress?e.charPress:e.formatValue(e.value)},t.prototype.init=function(e){var n=this;this.params=e,this.stopEditing=e.stopEditing;var r={showOnFocus:!1,render:function(e,t,n){var r=document.createElement("div"),o=(null!=n?n:"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),i=new RegExp(o,"gi"),u=document.createElement("span");return u.innerHTML=t.label.replace(i,(function(e){return"<strong>"+e+"</strong>"})),r.appendChild(u),e.addDestroyableEventListener(r,"mousedown",(function(n){e.currentItem=t,n.stopPropagation()})),r},renderGroup:function(e,t){var n=document.createElement("div");return n.textContent=t,n.className="group",n},className:"ag-cell-editor-autocomplete",minLength:1,emptyMsg:"None",strict:!0,autoselectfirst:!0,onFreeTextSelect:function(){},onSelect:function(e,t){e.currentItem=t},fetch:function(t,r,o){var i=n.getSelectData(e),u=r.toLowerCase()||t.eInput.value.toLowerCase();o(i.filter((function(e){return-1!==e.label.toLowerCase().indexOf(u)})))},debounceWaitMs:200,customize:function(e,t,n,r,o){o<100&&(r.style.top="10px",r.style.bottom=window.innerHeight-n.bottom+t.offsetHeight+"px",r.style.maxHeight="140px")}};this.focusAfterAttached=e.cellStartedEdit,this.eInput.placeholder=e.placeholder||"",this.eInput.value=t.getStartValue(e);var i=c(c({},r),e.autocomplete);this.strict=i.strict,this.autocompleter=o({input:this.eInput,render:function(e,t){return i.render?i.render(n,e,t):r.render(n,e,t)},renderGroup:function(e,t){return i.renderGroup?i.renderGroup(n,e,t):r.renderGroup(n,e,t)},className:i.className||r.className,minLength:void 0!==i.minLength?i.minLength:r.minLength,emptyMsg:i.emptyMsg||r.emptyMsg,strict:i.strict,autoselectfirst:i.autoselectfirst,showOnFocus:i.showOnFocus,onFreeTextSelect:function(e,t){return i.onFreeTextSelect?i.onFreeTextSelect(n,e,t):r.onFreeTextSelect(n,e,t)},onSelect:function(e,t,o){var u;return i.onSelect?(u=i.onSelect(n,e,t),o instanceof KeyboardEvent?n.handleTabEvent(o):n.destroy(),u):(u=r.onSelect(n,e,t),o instanceof KeyboardEvent?n.handleTabEvent(o):n.destroy(),u)},fetch:function(e,t,o){return i.fetch?i.fetch(n,e,t,o):r.fetch(n,e,t,o)},debounceWaitMs:i.debounceWaitMs||r.debounceWaitMs,customize:function(e,t,o,u){return i.customize?i.customize(n,e,t,o,u):r.customize(n,e,t,o,u)}}),e.required&&(this.required=!0),e.colDef.suppressKeyboardEvent||(e.colDef.suppressKeyboardEvent=t.suppressKeyboardEvent)},t.prototype.handleTabEvent=function(e){(e.which||e.keyCode||0)===r.Constants.KEY_TAB&&this.gridOptionsWrapper?e.shiftKey?this.gridOptionsWrapper.getApi().tabToPreviousCell():this.gridOptionsWrapper.getApi().tabToNextCell():this.destroy()},t.prototype.afterGuiAttached=function(e){if(this.focusAfterAttached){var t=this.eInput;t.focus(),t.select();var n=t.value?t.value.length:0;n>0&&t.setSelectionRange(n,n)}},t.prototype.focusIn=function(){this.eInput.focus(),this.eInput.select()},t.prototype.focusOut=function(){this.eInput.blur(),this.autocompleter.destroy()},t.prototype.destroy=function(){this.focusOut(),this.stopEditing&&this.stopEditing()},t.prototype.getValue=function(){return this.strict?this.currentItem:this.currentItem||{value:null,label:this.eInput.value}},t.prototype.isCancelAfterEnd=function(){return!!this.required&&!this.getValue()},t.prototype.isCancelBeforeStart=function(){return!1},t.prototype.isPopup=function(){return!1},t.prototype.getSelectData=function(e){return"function"==typeof e.selectData?e.selectData(e):Array.isArray(e.selectData)?e.selectData:[]},a([Object(r.Autowired)("gridOptionsWrapper")],t.prototype,"gridOptionsWrapper",void 0),t}(r.PopupComponent)}])}));
//# sourceMappingURL=ag-grid-autocomplete-editor.js.map